(this["webpackJsonpbeejee-task-manager-app"]=this["webpackJsonpbeejee-task-manager-app"]||[]).push([[0],{177:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),s=n.n(c),o="CURRENT_PAGE_URL",i="USER_DATA",u=function(e){return{type:i,value:e}},l=n(35),d=n(18),p="test-task-backend-session";function j(e,t){localStorage.setItem(p,JSON.stringify({username:e,token:t}))}function b(){var e=localStorage.getItem(p);return e?JSON.parse(e).username:null}function h(){var e=localStorage.getItem(p);return e?JSON.parse(e).token:null}function g(){localStorage.removeItem(p)}var m=n(233),f=n(252),O=n(253),v=n(46),x=n(231),k=n(2),w=Object(x.a)({topPanelStack:{width:"100%",justifyContent:"center",flexDirection:"row"},topPanelLoginStack:{flesDirection:"row",alignItems:"center",justifyContent:"space-between"},topPanelButton:{}}),S=function(e){var t=e.currentPage,n=e.username,a=e.handleLogout,r=w();return Object(k.jsxs)(m.a,{className:r.topPanelStack,children:[Object(k.jsx)(f.a,{classname:r.topPanelButton,variant:"outlined",component:v.b,to:"/?page=".concat(t),children:"Tasks"}),n?Object(k.jsxs)(m.a,{spacing:2,className:r.topPanelLoginStack,children:[Object(k.jsxs)(O.a,{children:["Hello, ",n,"!"]}),Object(k.jsx)(f.a,{classname:r.topPanelButton,onClick:a,variant:"outlined",children:"Logout"})]}):Object(k.jsx)(f.a,{classname:r.topPanelButton,component:v.b,to:"/login",variant:"outlined",children:"Login"})]})},C=function(){var e=Object(l.c)((function(e){return{currentPage:e.currentPage,userData:e.userData}})),t=e.currentPage,n=e.userData.username;return Object(k.jsx)(S,{username:n,currentPage:t,handleLogout:function(){return g()}})},y=n(17),P=n.n(y),L=n(25),D=n(21),E=n(4),I=n(11),N=n(81),F=n(244),T=["name"],U=function(e){var t=e.fieldList,n=e.onChange,a=e.errorList;return t.map((function(e){var t,r=e.name,c=Object(N.a)(e,T);return Object(k.jsx)(F.a,Object(D.a)(Object(D.a)({name:r},c),{},{error:Boolean(a[r]),onChange:n,helperText:null!==(t=a[r])&&void 0!==t?t:" "}),r)}))},B=[{name:"username",label:"Username"},{name:"password",label:"Password"}],_=function(e){var t=e.handleLogin,n=Object(a.useState)({}),r=Object(I.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)({}),i=Object(I.a)(o,2),u=i[0],l=i[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(m.a,{spacing:1,justifyContent:"space-between",style:{width:"310px"},children:Object(k.jsx)(U,{fieldList:B,onChange:function(e){var t=e.target;return s(Object(D.a)(Object(D.a)({},c),{},Object(E.a)({},t.name,t.value)))},errorList:u})}),Object(k.jsx)(m.a,{direction:"row",spacing:2,children:Object(k.jsx)(f.a,{onClick:Object(L.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,t(c);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),variant:"outlined",content:"Login",children:"Login"})})]})},M=Object(x.a)({loginPageViewStack:{width:"100%",height:"90vh"}}),R=function(e){var t=e.userData,n=e.currentPageUrl,a=e.handleLogout,r=e.handleLogin,c=e.message,s=M();return Object(k.jsx)(m.a,{className:s.loginPageViewStack,spacing:4,justifyContent:"center",alignItems:"center",children:t.username?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(O.a,{children:"You are logged in as ".concat(t.username,".")}),Object(k.jsx)(f.a,{component:v.b,to:"/?page=".concat(n),variant:"outlined",children:"Go back to the Task Page"}),Object(k.jsx)(f.a,{variant:"contained",onClick:a,children:"Logout"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(O.a,Object(D.a)({},c)),Object(k.jsx)(_,{handleLogin:r})]})})},A=n(119),V=n.n(A).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2"}),J="Example";function z(e){return W.apply(this,arguments)}function W(){return(W=Object(L.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={developer:J},e.prev=1,e.next=4,V.get(t,{params:n});case 4:return a=e.sent,e.abrupt("return",{tasks:a.data.message.tasks,totalPageCount:Math.ceil(a.data.message.total_task_count/3)});case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function G(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(L.a)(P.a.mark((function e(t){var n,a,r,c,s,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.password,c=void 0===r?"":r,e.prev=1,(s=new FormData).append("username",a),s.append("password",c),o={method:"post",url:"/login?developer=".concat(J),data:s},e.next=8,V(o);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function q(e){return H.apply(this,arguments)}function H(){return(H=Object(L.a)(P.a.mark((function e(t){var n,a,r,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.email,r=t.text,e.prev=1,(c=new FormData).append("username",n),c.append("email",a),c.append("text",r),s={method:"post",url:"/create?developer=".concat(J),data:c},e.next=9,V(s);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function $(e){return K.apply(this,arguments)}function K(){return(K=Object(L.a)(P.a.mark((function e(t){var n,a,r,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.text,r=t.taskStatus,e.prev=1,(c=new FormData).append("id",n),c.append("text",a),c.append("status",r),c.append("token",h()),s={method:"post",url:"/edit/".concat(n,"?developer=").concat(J),data:c},e.next=10,V(s);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var Q=n(123),X=function(e){var t=e.match(Object(Q.a)(/^\/login\/(0)/,{param:1}));return t&&"0"===t.groups.param?{color:"error",children:"You need to log in"}:{}},Z=function(e){var t,n=e.location,r=Object(l.c)((function(e){return{currentPageUrl:e.currentPageUrl,userData:e.userData}})),c=r.currentPageUrl,s=r.userData,o=Object(l.b)(),i=null!==(t=b())&&void 0!==t?t:s.username;Object(a.useEffect)((function(){i&&i!==s.username&&o(u({username:i}))}),[i]);var d=function(){var e=Object(L.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:if(200!==(n=e.sent).status||"ok"!==n.data.status){e.next=7;break}return j(t.username,n.data.message.token),o(u({username:t.username})),e.abrupt("return",{});case 7:return e.abrupt("return",n.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)(R,{userData:s,currentPageUrl:c,message:X(n.pathname),handleLogout:function(){g(),u({})},handleLogin:d})},ee=n(246),te=n(248),ne=n(254),ae=n(250),re=n(237),ce=function(e){var t=e.label,n=e.options,a=e.value,r=e.onChange;return Object(k.jsxs)(ae.a,{component:"fieldset",children:[Object(k.jsx)(re.a,{component:"legend",children:t}),Object(k.jsx)(te.a,{row:!0,value:a,onChange:function(e,t){return r(t)},children:n.map((function(e){return Object(k.jsx)(ne.a,{value:e,control:Object(k.jsx)(ee.a,{}),label:e},e)}))})]})},se=[{name:"username",label:"Name"},{name:"email",label:"E-mail"},{name:"text",label:"Task discription",rows:4,multiline:!0}],oe=function(e){var t=e.onSubmitClick,n=Object(a.useState)({}),r=Object(I.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)({}),i=Object(I.a)(o,2),u=i[0],l=i[1],d=function(){var e=Object(L.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,t(u);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(m.a,{spacing:1,justifyContent:"space-between",children:[Object(k.jsx)(U,{fieldList:se,onChange:function(e){var t=e.target;return l(Object(D.a)(Object(D.a)({},u),{},Object(E.a)({},t.name,t.value)))},errorList:c}),Object(k.jsx)(f.a,{variant:"contained",onClick:d,children:"Sabmit"})]})},ie=Object(x.a)({rightStack:{justifyContent:"center",alignItems:"center",flex:"0 0 310px"}}),ue=function(e){var t=e.sortField,n=e.sortDirection,a=e.handleChange,r=e.handleCreateTask,c=ie();return Object(k.jsxs)(m.a,{spacing:1,className:c.rightStack,children:[Object(k.jsx)(ce,{label:"Sort Field",options:["username","email","status"],value:t,onChange:function(e){return a({sortField:e})}}),Object(k.jsx)(ce,{label:"Sort Directions",options:["asc","desc"],value:n,onChange:function(e){return a({sortDirection:e})}}),Object(k.jsx)(oe,{onSubmitClick:r})]})},le=n(122),de=n(249),pe=n(34),je=n(240),be=n(239),he={0:"Task not completed",1:"Task not completed, edited by admin",10:"Mission accomplished",11:"The task was edited by the admin and completed"},ge=Object(x.a)({ExpandMoreIcon:{fontSize:"large"},statusMenuItem:{display:"block"},div:function(e){return{cursor:e.isEditingEnabled?"arrow":"pointer",marginLeft:"auto"}}}),me=Object(pe.a)({paper:{border:"2px solid rgba(49, 54, 65, 1)","& .MuiList-root":{padding:0}}})((function(e){return Object(k.jsx)(le.a,Object(D.a)({elevation:0,getvontentanchorel:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),fe=function(e){var t=e.value,n=e.onChange,r=e.isEditingEnabled,c=ge({isEditingEnabled:r}),s=Object(a.useState)(null),o=Object(I.a)(s,2),i=o[0],u=o[1],l=Boolean(i);return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(be.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:r?function(e){var t=e.currentTarget;u(t)}:function(){},endIcon:r?Object(k.jsx)(je.a,{}):void 0,children:"Status: ".concat(he[t])}),r&&Object(k.jsx)(me,{id:"basic-menu",anchorEl:i,open:l,onClose:function(){return u(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object.keys(he).map((function(e){return Object(k.jsx)(de.a,{className:c.statusMenuItem,selected:e===t,onClick:function(){return t=e,u(null),void n(t);var t},children:he[e]},e)}))})]})})},Oe=n(241),ve=n(242),xe=n(120),ke=n.n(xe),we=n(243),Se=Object(x.a)({noBorder:{border:"none"},marginLeftAuto:{marginLeft:"auto"},contentViewItemStack:{border:"2px solid gray",padding:4,borderRadius:4,flexGrow:1}}),Ce=function(e){var t=e.data,n=e.userIsLogin,r=e.handleEditTask,c=Object(a.useState)(t.text),s=Object(I.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(t.status),l=Object(I.a)(u,2),d=l[0],p=l[1],j=Se(),b=Object(a.useState)(!1),h=Object(I.a)(b,2),g=h[0],f=h[1];return Object(k.jsxs)(m.a,{className:j.contentViewItemStack,children:[Object(k.jsx)(Oe.a,{children:"USERNAME: ".concat(t.username," E-MAIL: ").concat(t.email)}),Object(k.jsx)(F.a,{variant:"outlined",fullWidth:!0,defaultValue:t.text,InputProps:{classes:{notchedOutline:j.noBorder},readOnly:!g},onChange:function(e){return i(e.target.value)}}),Object(k.jsxs)(m.a,{direction:"row",children:[Object(k.jsx)(fe,{value:t.status,onChange:function(e){return p(e)},isEditingEnabled:g}),n&&Object(k.jsx)(ve.a,{className:j.marginLeftAuto,size:"small",onClick:function(){g&&r({id:t.id,text:o,taskStatus:d}),f(!g)},children:g?Object(k.jsx)(we.a,{}):Object(k.jsx)(ke.a,{})})]})]})},ye=["tasks"],Pe=Object(x.a)({contentViewStack:{minWidth:800,height:"100%"}}),Le=function(e){var t=e.tasks,n=Object(N.a)(e,ye),a=Pe();return Object(k.jsx)(m.a,{justifyContent:"flex-start",spacing:6,className:a.contentViewStack,children:t.map((function(e){return Object(k.jsx)(Ce,Object(D.a)({data:e},n),e.id)}))})},De=n(247),Ee=function(e){var t=e.totalPageCount,n=e.curentPage,a=e.onPageChange;return Object(k.jsx)(m.a,{spacing:2,justifyContent:"space-around",children:Object(k.jsx)(De.a,{count:t,page:n,shape:"rounded",onChange:function(e,t){return a(t)}})})},Ie=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Ne=Object(x.a)({taskPageStack:{width:"100vw",height:"90vh",justifyContent:"center",alignItems:"center"},taskConteiner:{flexDirection:"row",justifyContent:"center",alignItems:"center",height:"70%",marginLeft:"10%"}}),Fe=function(e){var t=e.history,n=e.location,r=Ne(),c=Object(l.c)((function(e){return e.userData})),s=Object(a.useState)([]),i=Object(I.a)(s,2),d=i[0],p=i[1],j=Object(a.useState)(0),b=Object(I.a)(j,2),h=b[0],f=b[1],O=Object(l.b)(),v=function(e){var t=new URLSearchParams(e);return{page:parseInt(t.get("page")),sortDirection:t.get("sort_direction"),sortField:t.get("sort_field")}}(n.search);function x(){return w.apply(this,arguments)}function w(){return w=Object(L.a)(P.a.mark((function e(){var t,a,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n.search);case 2:t=e.sent,a=t.tasks,r=t.totalPageCount,p(a),f(r);case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function S(){return(S=Object(L.a)(P.a.mark((function e(t){var n,a,r,c,s,o,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.email,c=void 0===r?"":r,s=t.text,o=void 0===s?"":s,e.next=3,q({username:a,email:c,text:Ie(o)});case 3:if("error"!==(i=e.sent).data.status){e.next=8;break}return e.abrupt("return",i.data.message);case 8:return x(v),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){var a=n.pathname+function(e,t){var n,a,r,c=new URLSearchParams;return c.append("sort_field",null!==(n=e.sortField)&&void 0!==n?n:t.sortField),c.append("sort_direction",null!==(a=e.sortDirection)&&void 0!==a?a:t.sortDirection),c.append("page",null!==(r=e.page)&&void 0!==r?r:t.page),"?".concat(c.toString())}(e,v);O({type:o,value:a}),t.push(a)},y=function(){var e=Object(L.a)(P.a.mark((function e(n){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(Object(D.a)(Object(D.a)({},n),{},{text:Ie(n.text)}));case 2:((a=e.sent).data.status=a.data.message.token)?(g(),O(u({})),t.push("/login/0")):x();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[n.search]),Object(k.jsxs)(m.a,{className:r.taskPageStack,spacing:4,children:[Object(k.jsxs)(m.a,{className:r.taskConteiner,spacing:4,children:[Object(k.jsx)(Le,{tasks:d,userIsLogin:Boolean(c.username),handleEditTask:y}),Object(k.jsx)(ue,{sortDirection:v.sortDirection,sortField:v.sortField,handleChange:C,handleCreateTask:function(e){return S.apply(this,arguments)}})]}),Object(k.jsx)(Ee,{totalPageCount:h,curentPage:v.page,onPageChange:function(e){return C({page:e})}})]})};Fe.defaultProps={history:{},location:{}};var Te=Fe,Ue={pathname:"/tasks",search:"?sort_field=username&sort_direction=asc&page=1"};var Be=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e(u({username:b()}))}),[e]),Object(k.jsxs)(m.a,{children:[Object(k.jsx)(C,{}),Object(k.jsxs)(d.d,{children:[Object(k.jsx)(d.b,{path:"/tasks",component:Te}),Object(k.jsx)(d.b,{exact:!0,path:"/",children:Object(k.jsx)(d.a,{to:Ue})}),Object(k.jsx)(d.b,{path:"/login",component:Z})]})]})},_e=n(124),Me=n(121),Re=Object(_e.b)({currentPageUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===o?a:e},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===i?a:e}}),Ae=Re,Ve=Object(_e.c)(Ae,Object(_e.a)(Me.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(l.a,{store:Ve,children:Object(k.jsx)(v.a,{children:Object(k.jsx)(Be,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[177,1,2]]]);
//# sourceMappingURL=main.858df413.chunk.js.map